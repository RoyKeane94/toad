{% extends "pages/layout.html" %}
{% load static %}

{% block title %}Toad - For when your brain has too many tabs open{% endblock %}

{% block extra_head %}
<style>
    /* Override layout padding for home page */
    #app {
        padding: 0 !important;
    }
    
    /* Mobile-specific text wrapping */
    @media (max-width: 767px) {
        #typewriter-text {
            white-space: normal !important;
            word-wrap: break-word !important;
            overflow-wrap: break-word !important;
            width: auto !important;
            overflow: visible !important;
        }
        
        #headline-container h1 {
            white-space: normal !important;
            word-wrap: break-word !important;
        }
    }
    
    /* Comparison table styles */
    .comparison-table {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1), 0 2px 6px rgba(0, 0, 0, 0.08);
        border: 1px solid var(--border-color);
        display: table;
    }
    
    #home-comparison-table {
        padding: 1rem;
        margin: 2rem 0;
    }
    
    .comparison-table thead {
        background: white;
    }
    
    .comparison-table th {
        padding: 1.5rem 1rem;
        text-align: center;
        font-weight: 700;
        font-size: 1.125rem;
        color: var(--text-primary);
        border-bottom: 2px solid var(--border-color);
    }
    
    .comparison-table th:first-child {
        text-align: left;
        font-weight: 600;
        color: var(--text-secondary);
    }
    
    .comparison-table th.popular {
        background: var(--primary-action-bg);
        color: white;
        position: relative;
    }
    
    .comparison-table th.popular::before {
        content: 'Most Popular';
        position: absolute;
        top: 0.5rem;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.9;
    }
    
    .comparison-table td {
        padding: 1.25rem 1rem;
        text-align: center;
        border-bottom: 1px solid var(--border-color);
        color: var(--text-primary);
    }
    
    .comparison-table td:first-child {
        text-align: left;
        font-weight: 500;
        color: var(--text-primary);
    }
    
    .comparison-table tbody tr:last-child td {
        border-bottom: none;
    }
    
    .comparison-table tbody tr:hover {
        background: var(--grid-header-bg);
    }
    
    /* Light green shading for Team column */
    .comparison-table tbody tr td:last-child {
        background: oklch(0.98 0.02 120);
    }
    
    .comparison-table tbody tr:hover td:last-child {
        background: oklch(0.96 0.03 120);
    }
    
    .tick {
        color: var(--primary-action-bg);
        font-size: 1.5rem;
        font-weight: bold;
    }
    
    .cross {
        color: #dc2626;
        font-size: 1.5rem;
        font-weight: bold;
    }
    
    .plan-name {
        font-size: 1.5rem;
        margin-top: 1.5rem;
        display: block;
    }
    
    @media (max-width: 768px) {
        .comparison-table {
            font-size: 0.875rem;
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 0.75rem 0.5rem;
        }
        
        .comparison-table th:first-child,
        .comparison-table td:first-child {
            min-width: 140px;
        }
        
        .plan-name {
            font-size: 1.125rem;
        }
        
        .tick, .cross {
            font-size: 1.25rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="min-h-[80vh] sm:min-h-[80vh] flex flex-col items-center justify-start px-4 pt-8" style="background: linear-gradient(to bottom, oklch(0.95 0.05 120), oklch(0.97 0.03 120) 25%, oklch(0.99 0.01 120) 50%, white 75%);">
    <!-- Initial Logo and Text (shown first) -->
    <div id="initial-content" class="text-center">
        <div class="mb-2" id="logo-container" style="opacity: 0;">
            <div class="w-48 h-48 sm:w-64 sm:h-64 mx-auto">
                <img src="{% static 'img/logo/toad_logo.png' %}" alt="Toad Logo" class="w-full h-full object-contain">
            </div>
        </div>
        
        
        <h1 id="initial-text" class="text-4xl sm:text-6xl font-extrabold leading-tight mb-8" style="opacity: 0;">
            <span style="color: var(--title-text);">For people who</span>
            <span style="color: var(--primary-action-bg);"> have a job to do.</span>
        </h1>
        
        <!-- Quick Simplicity Message -->
        <div id="simplicity-text" class="text-center mb-6" style="opacity: 0;">
            <p class="text-lg sm:text-xl text-gray-800 font-semibold max-w-2xl mx-auto leading-relaxed">
                A tool that works right out of the box — no training, no setup, no headaches.
            </p>
        </div>

        <!-- Secondary Text -->
        <div id="secondary-text" class="text-center mb-8" style="opacity: 0;">
            <p class="text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
                Tired of complex, bloated tools? Toad is the antidote. It's a simple, visual command center for your projects and goals. Get organised in 60 seconds.
            </p>
        </div>
        
        <!-- Email Signup Form -->
        <div id="email-signup" class="text-center mt-8 mb-8" style="opacity: 0;">
            <form id="email-signup-form" class="max-w-md mx-auto">
                <div class="flex flex-col sm:flex-row gap-3">
                    <input type="email" 
                           id="signup-email" 
                           placeholder="Enter your email"
                           class="flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--primary-action-bg)] focus:border-[var(--primary-action-bg)]"
                           required>
                    <button type="submit" 
                            class="px-6 py-3 bg-[var(--primary-action-bg)] text-white rounded-lg font-medium hover:bg-[var(--primary-action-hover-bg)] transition-all duration-200 cursor-pointer whitespace-nowrap">
                        Join Today for Free
                    </button>
                </div>
            </form>
        </div>
        
    </div>

</div>

<!-- See Toad in Action Section -->
<section id="video-section" class="py-16 sm:py-24 bg-white opacity-0 translate-y-8 transition-all duration-700">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-5xl sm:text-7xl font-bold text-gray-900 mb-4">
            See Toad in action
        </h2>
        
                <p class="text-lg sm:text-xl text-gray-600 mb-12 max-w-2xl mx-auto leading-relaxed">
                    The simple, visual command center that gives you an instant overview of every project. <span class="text-green-600 font-bold">Finally, clarity without the chaos.</span>
                </p>
        
        <div class="max-w-4xl mx-auto">
            <video 
                id="hero-video"
                src="{% static 'video/Toad Landing Page.mp4' %}" 
                autoplay 
                muted 
                loop 
                playsinline
                preload="auto"
                class="w-full h-auto rounded-lg shadow-2xl"
                style="box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>
    <div class="flex justify-center mt-10">
        <a
            href="{% url 'pages:toad_in_action' %}"
            class="inline-flex items-center px-8 py-3 rounded-lg font-medium text-white bg-[var(--primary-action-bg)] hover:bg-[var(--primary-action-hover-bg)] transition-colors duration-200 cursor-pointer">
            See Toad in Action
        </a>
    </div>
</section>    

    <!-- Main Value Prop -->
    <div class="w-full px-4 py-12" style="background: linear-gradient(to bottom, oklch(0.95 0.05 120), oklch(0.97 0.03 120) 25%, oklch(0.99 0.01 120) 50%, white 75%);">
        <div class="w-full">
            <!-- Full width layout -->
            <div class="text-center mb-16">
                <h2 class="text-5xl md:text-6xl font-bold mb-3 text-gray-900">
                    <span class="text-green-600">Clarity</span>, by Design.
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                    We built Toad for people who have a job to do. That means giving you exactly what you need to get organised, and ruthlessly cutting everything you don't.
                </p>
            </div>

            <!-- Six Feature Points in 2x3 Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
                <!-- Point 1 -->
                <div class="feature-point opacity-0 translate-y-4 transition-all duration-500" data-delay="0">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-green-600 mb-2">Your Visual Command Center</h3>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                Get a bird's-eye view of all your projects, clients, and goals. Toad's simple grid turns your chaos into a clear, scannable dashboard, so you always know where you stand.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Point 2 -->
                <div class="feature-point opacity-0 translate-y-4 transition-all duration-500" data-delay="100">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-green-600 mb-2">Radical Simplicity</h3>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                No complex setup or lengthy induction needed. Sign up and have your first project organised in under 60 seconds. It's productivity that just works, right out of the box.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Point 3 -->
                <div class="feature-point opacity-0 translate-y-4 transition-all duration-500" data-delay="200">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-green-600 mb-2">Projects, Not Just Tasks</h3>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                A simple list can't manage a product launch. Toad's unique "matrix of checklists" gives you the structure to break down complex projects into manageable steps, all in one view.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Point 4 -->
                <div class="feature-point opacity-0 translate-y-4 transition-all duration-500" data-delay="300">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-green-600 mb-2">Instant Collaboration</h3>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                Share a grid with your team in two clicks. It's a shared command center that keeps everyone in sync, turning scattered efforts into unified progress.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Point 5 -->
                <div class="feature-point opacity-0 translate-y-4 transition-all duration-500" data-delay="400">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-green-600 mb-2">Focused Workspaces</h3>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                Stop cramming your entire life onto one list. Create a separate, dedicated grid for each project, client, or area of your life to keep your workspace clean and your focus sharp.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Point 6 -->
                <div class="feature-point opacity-0 translate-y-4 transition-all duration-500" data-delay="500">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center">
                            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-green-600 mb-2">Clarity Without the Cost</h3>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                We believe in simple, fair pricing. Get started with our generous free plan, and unlock more power for just the price of a coffee a month.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- Comparison Table Section -->
<section class="py-16 sm:py-24 bg-white">
    <div class="max-w-6xl mx-auto px-4">
        <!-- Heading -->
        <div id="comparison-heading" class="text-center mb-12 opacity-0 translate-y-8 transition-all duration-700">
            <h2 class="text-5xl sm:text-6xl md:text-7xl font-bold text-gray-900 mb-4">
                Find your perfect <span class="text-green-600">Toad plan</span>
            </h2>
        </div>
        
        <!-- Comparison Table -->
        <div id="home-comparison-table" class="overflow-x-auto opacity-0 translate-y-8 transition-all duration-700">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Free</th>
                        <th>
                            <span class="plan-name">Personal</span>
                            <span style="display: block; font-size: 0.875rem; font-weight: 400; margin-top: 0.5rem; opacity: 0.9;">£2/month</span>
                        </th>
                        <th class="popular">
                            <span class="plan-name">Team</span>
                            <span style="display: block; font-size: 0.875rem; font-weight: 400; margin-top: 0.5rem; opacity: 0.9;">£5/month</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Number of grids</td>
                        <td>2</td>
                        <td>Up to 10</td>
                        <td>Unlimited</td>
                    </tr>
                    <tr>
                        <td>Simple and powerful grid system</td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                    <tr>
                        <td>Drag and drop</td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                    <tr>
                        <td>Add notes to tasks</td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                    <tr>
                        <td>Toad templates</td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                    <tr>
                        <td>Custom templates (save & reuse layouts)</td>
                        <td><span class="cross">✗</span></td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                    <tr>
                        <td>Archive grids (keep history, hide from active)</td>
                        <td><span class="cross">✗</span></td>
                        <td><span class="tick">✓</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                    <tr>
                        <td>Collaborate (edit, comments, @mentions)</td>
                        <td><span class="cross">✗</span></td>
                        <td><span class="cross">✗</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                    <tr>
                        <td>Multiple users on the same grid</td>
                        <td><span class="cross">✗</span></td>
                        <td><span class="cross">✗</span></td>
                        <td><span class="tick">✓</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="py-16 sm:py-24 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-4xl sm:text-6xl font-bold text-gray-900 mb-6">
            Ready to <span style="color: var(--primary-action-bg);">simplify your workflow?</span>
        </h2>
        <p class="text-xl text-gray-600 mb-12">
            Join thousands who've ditched complexity for clarity.
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
            <a href="{% url 'accounts:register_choices' %}"
               class="inline-block w-full sm:w-auto px-8 py-4 rounded-lg font-medium transition-all duration-200 cursor-pointer text-white text-center"
               style="background: var(--primary-action-bg);"
               onmouseover="this.style.background='var(--primary-action-hover-bg)'" 
               onmouseout="this.style.background='var(--primary-action-bg)'">
                Try Toad today for free
            </a>
            <a href="{% url 'pages:templates_overview' %}"
               class="inline-block w-full sm:w-auto px-8 py-4 rounded-lg font-medium transition-all duration-200 cursor-pointer text-gray-900 bg-white border border-gray-300 text-center"
               onmouseover="this.style.backgroundColor='#f9fafb'" 
               onmouseout="this.style.backgroundColor='white'">
                See how other users are benefitting from Toad
            </a>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Animation sequence elements
        const logoContainer = document.getElementById('logo-container');
        const initialText = document.getElementById('initial-text');
        const simplicityText = document.getElementById('simplicity-text');
        const secondaryText = document.getElementById('secondary-text');
        const emailSignup = document.getElementById('email-signup');
        const initialContent = document.getElementById('initial-content');
        
        // Animation sequence: Logo → "For people who have a job to do" → Secondary text → Email signup
        initialContent.style.display = 'block';
        
        // Phase 1: Show logo first
        setTimeout(() => {
            logoContainer.style.opacity = '1';
            logoContainer.style.transition = 'opacity 0.6s ease-out';
        }, 50);
        
        // Phase 2: Show "For people who have a job to do" text
        setTimeout(() => {
            initialText.style.opacity = '1';
            initialText.style.transition = 'opacity 0.6s ease-out';
        }, 400);
        
        // Phase 3: Show simplicity message
        setTimeout(() => {
            simplicityText.style.opacity = '1';
            simplicityText.style.transition = 'opacity 0.6s ease-out';
        }, 800);
        
        // Phase 4: Show secondary text
        setTimeout(() => {
            secondaryText.style.opacity = '1';
            secondaryText.style.transition = 'opacity 0.6s ease-out';
        }, 1100);

        // Phase 5: Show email signup form
        setTimeout(() => {
            emailSignup.style.opacity = '1';
            emailSignup.style.transition = 'opacity 0.6s ease-out';
        }, 1400);
        
        
        // Handle email signup form submission
        const emailSignupForm = document.getElementById('email-signup-form');
        const signupEmailInput = document.getElementById('signup-email');
        
        emailSignupForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = signupEmailInput.value.trim();
            if (email) {
                // Redirect to registration with email parameter
                window.location.href = `{% url 'accounts:register_free' %}?email=${encodeURIComponent(email)}`;
            }
        });
    });
    
    // Force video autoplay
    document.addEventListener('DOMContentLoaded', function() {
        const video = document.getElementById('hero-video');
        if (video) {
            // Try to play immediately
            video.play().catch(() => {
                // If autoplay fails, try again after any user interaction
                const playVideoOnInteraction = () => {
                    video.play().catch(() => {});
                    document.removeEventListener('click', playVideoOnInteraction);
                    document.removeEventListener('scroll', playVideoOnInteraction);
                    document.removeEventListener('touchstart', playVideoOnInteraction);
                };
                
                document.addEventListener('click', playVideoOnInteraction);
                document.addEventListener('scroll', playVideoOnInteraction);
                document.addEventListener('touchstart', playVideoOnInteraction);
            });
            
            // Ensure video plays when it comes into view
            const videoObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        video.play().catch(() => {});
                    }
                });
            }, { threshold: 0.5 });
            
            videoObserver.observe(video);
        }
    });
</script>

<script>
// Interactive Use Case Section JS
(function() {
    const personas = [
        {
            id: 'persona-students',
            img: {
                desktop: '{% static "gif/Course Planner GIF.gif" %}',
                mobile: '{% static "img/Mobile - Student Grid.png" %}'
            },
            video: {
                desktop: '{% static "video/Toad - Students Highlights.mp4" %}'
            },
            alt: 'A screenshot of a Toad grid for students',
        },
        {
            id: 'persona-professionals',
            img: {
                desktop: '{% static "gif/Professionals GIF.gif" %}',
                mobile: '{% static "img/Mobile - Professionals Grid.png" %}'
            },
            alt: 'A screenshot of a Toad grid for professionals',
        },
        {
            id: 'persona-entrepreneurs',
            img: {
                desktop: '{% static "gif/Entrepreneurs GIF.gif" %}',
                mobile: '{% static "img/Mobile - Entrepreneurs Grid.png" %}'
            },
            alt: 'A screenshot of a Toad grid for entrepreneurs',
        },
    ];
    const triggers = document.querySelectorAll('.persona-trigger');
    const showcaseImg = document.getElementById('showcase-image');
    const showcaseVideo = document.getElementById('showcase-video');
    // Always pre-select Students persona on load
    function setActivePersona(personaId) {
        triggers.forEach(t => {
            t.classList.remove('active');
            t.style.borderLeftColor = 'transparent';
            t.style.borderLeftWidth = '6px';
            const title = t.querySelector('.persona-title');
            if (title) title.style.color = getComputedStyle(document.documentElement).getPropertyValue('--text-primary');
        });
        const active = document.getElementById(personaId);
        if (active) {
            active.classList.add('active');
            active.style.borderLeftColor = getComputedStyle(document.documentElement).getPropertyValue('--tertiary-action-bg');
            active.style.borderLeftWidth = '8px';
            const title = active.querySelector('.persona-title');
            if (title) title.style.color = getComputedStyle(document.documentElement).getPropertyValue('--tertiary-action-bg');
            active.style.boxShadow = '0 4px 16px 0 rgba(16,185,129,0.10)';
            const persona = personas.find(p => p.id === personaId);
            if (persona && showcaseImg) {
                const isMobile = window.innerWidth < 768;
                // If desktop and persona has a desktop video, show video instead of image
                if (!isMobile && persona.video && persona.video.desktop && showcaseVideo) {
                    // Hide image, show video
                    showcaseImg.style.display = 'none';
                    showcaseVideo.style.display = 'block';
                    if (showcaseVideo.src !== persona.video.desktop) {
                        showcaseVideo.src = persona.video.desktop;
                    }
                } else {
                    // Show image, hide video
                    showcaseVideo.style.display = 'none';
                    showcaseImg.style.display = 'block';
                    if (persona.id === 'persona-students' || persona.id === 'persona-professionals' || persona.id === 'persona-entrepreneurs') {
                        showcaseImg.src = isMobile ? persona.img.mobile : persona.img.desktop;
                    } else {
                        showcaseImg.src = persona.img;
                    }
                    showcaseImg.alt = persona.alt;
                }
            }
        }
    }
    setActivePersona('persona-students');
    triggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
            setActivePersona(this.id);
        });
        trigger.addEventListener('blur', function() {
            this.style.boxShadow = '';
        });
    });

    // Intersection Observer for fade-in sections
    const greenSection = document.getElementById('green-section');
    const videoSection = document.getElementById('video-section');
    const useCaseSection = document.getElementById('use-case-section');
    
    if (videoSection) {
        const videoObserver = new window.IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    videoSection.classList.remove('opacity-0', 'translate-y-8');
                    videoSection.classList.add('opacity-100', 'translate-y-0');
                    videoObserver.disconnect();
                }
            });
        }, { threshold: 0.2 });
        videoObserver.observe(videoSection);
    }
    
    if (greenSection) {
        const greenObserver = new window.IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    greenSection.classList.remove('opacity-0', 'translate-y-8');
                    greenSection.classList.add('opacity-100', 'translate-y-0');
                    greenObserver.disconnect();
                }
            });
        }, { threshold: 0.2 });
        greenObserver.observe(greenSection);
    }
    
    if (useCaseSection) {
        const useCaseObserver = new window.IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    useCaseSection.classList.remove('opacity-0', 'translate-y-8');
                    useCaseSection.classList.add('opacity-100', 'translate-y-0');
                    useCaseObserver.disconnect();
                }
            });
        }, { threshold: 0.2 });
        useCaseObserver.observe(useCaseSection);
    }
    
    // Feature points animation
    const featurePoints = document.querySelectorAll('.feature-point');
    if (featurePoints.length > 0) {
        const featureObserver = new window.IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const delay = parseInt(entry.target.getAttribute('data-delay'));
                    setTimeout(() => {
                        entry.target.classList.remove('opacity-0', 'translate-y-4');
                        entry.target.classList.add('opacity-100', 'translate-y-0');
                    }, delay);
                }
            });
        }, { threshold: 0.1 });
        
        featurePoints.forEach(point => {
            featureObserver.observe(point);
        });
    }
    
    // Comparison table section animation
    const comparisonHeading = document.getElementById('comparison-heading');
    const comparisonTable = document.getElementById('home-comparison-table');
    
    if (comparisonHeading && comparisonTable) {
        const comparisonObserver = new window.IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Animate heading first
                    setTimeout(() => {
                        comparisonHeading.classList.remove('opacity-0', 'translate-y-8');
                        comparisonHeading.classList.add('opacity-100', 'translate-y-0');
                    }, 100);
                    
                    // Animate table after heading
                    setTimeout(() => {
                        comparisonTable.classList.remove('opacity-0', 'translate-y-8');
                        comparisonTable.classList.add('opacity-100', 'translate-y-0');
                    }, 400);
                    
                    comparisonObserver.disconnect();
                }
            });
        }, { threshold: 0.2 });
        
        // Observe both elements
        comparisonObserver.observe(comparisonHeading);
    }
})();
</script>

{% endblock %}