{% extends "pages/layout.html" %}
{% load static %}

{% block title %}Toad - For when your brain has too many tabs open{% endblock %}

{% block extra_head %}
<style>
    /* Override layout padding for home page */
    #app {
        padding: 0 !important;
    }
    
    /* Mobile-specific text wrapping */
    @media (max-width: 767px) {
        #typewriter-text {
            white-space: normal !important;
            word-wrap: break-word !important;
            overflow-wrap: break-word !important;
            width: auto !important;
            overflow: visible !important;
        }
        
        #headline-container h1 {
            white-space: normal !important;
            word-wrap: break-word !important;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="min-h-[80vh] sm:min-h-[80vh] flex flex-col items-center justify-center px-4 bg-white">
    <!-- Initial Logo and Text (shown first) -->
    <div id="initial-content" class="text-center">
        <div class="mb-6" id="logo-container" style="opacity: 0;">
            <div class="w-48 h-48 sm:w-64 sm:h-64 mx-auto">
                <img src="{% static 'img/logo/toad_logo.png' %}" alt="Toad Logo" class="w-full h-full object-contain">
            </div>
        </div>
        <h1 id="initial-text" class="text-4xl sm:text-6xl font-extrabold leading-tight mb-8" style="opacity: 0;">
            <span style="color: var(--title-text);">For people who</span>
            <span style="color: var(--primary-action-bg);"> have a job to do.</span>
        </h1>
        <!-- Join Button -->
        <div id="join-button" class="text-center" style="opacity: 0;">
            <a href="{% url 'accounts:register_choices' %}"
               class="inline-block px-8 py-3 rounded-lg font-medium transition-all duration-200 cursor-pointer text-[var(--primary-action-text)]"
               style="background: var(--tertiary-action-bg);"
               onmouseover="this.style.background='#e65c36'" onmouseout="this.style.background='var(--tertiary-action-bg)'">
                Join Today for Free
            </a>
        </div>
    </div>

    <!-- Video Section (hidden initially) -->
    <div id="video-container" class="w-full max-w-5xl relative" style="opacity: 0; display: none;">
        <video id="hero-video" class="w-full h-auto object-contain" 
               muted 
               playsinline>
            <source src="{% static 'video/Home -Hero Video.mp4' %}" type="video/mp4">
        </video>
        <!-- Dark Overlay on Video -->
        <div class="absolute inset-0 bg-black opacity-60 pointer-events-none"></div>
    </div>
</div>

<!-- Interactive Use Case Section -->
<section id="use-case-section" class="pt-8 pb-16 sm:pt-12 sm:pb-24 mt-2 sm:mt-6 mb-10 opacity-0 translate-y-8 transition-all duration-700" style="background: var(--primary-action-bg);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
            <h2 class="text-3xl sm:text-4xl font-bold" style="color: #fff;">The surprising power of a simple grid</h2>
            <div class="mt-6 mb-10 max-w-3xl mx-auto">
                <p class="text-lg" style="color: var(--container-bg);">
                    Toad's simple grid helps you organise anything, from your job search to your next big project. Start with a pre-built template or a blank canvas and build the simple grid you need
                </p>
            </div>
        </div>
        <div class="mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 items-center">
            <!-- Left Column: Text Triggers -->
            <div class="lg:col-span-1 space-y-6">
                <div id="persona-students" class="persona-trigger active cursor-pointer p-4 rounded-lg border persona-box" style="border-color: var(--border-color); background: var(--container-bg); transition: box-shadow 0.2s, border-left-width 0.2s, border-left-color 0.2s; border-left-width: 6px; border-left-color: transparent;">
                    <h3 class="text-lg font-semibold persona-title" style="color: var(--text-primary); transition: color 0.2s;">For Students</h3>
                    <ul class="text-sm mt-2 space-y-2" style="color: var(--text-secondary); list-style: none; padding: 0;">
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Track job applications and internships</li>
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Plan revision and manage deadlines</li>
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Organise group projects and coursework</li>
                    </ul>
                </div>
                <div id="persona-professionals" class="persona-trigger cursor-pointer p-4 rounded-lg border persona-box" style="border-color: var(--border-color); background: var(--container-bg); transition: box-shadow 0.2s, border-left-width 0.2s, border-left-color 0.2s; border-left-width: 6px; border-left-color: transparent;">
                    <h3 class="text-lg font-semibold persona-title" style="color: var(--text-primary); transition: color 0.2s;">For Professionals</h3>
                    <ul class="text-sm mt-2 space-y-2" style="color: var(--text-secondary); list-style: none; padding: 0;">
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Manage client projects and deliverables</li>
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Track personal goals and habits</li>
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Plan your week without corporate clutter</li>
                    </ul>
                </div>
                <div id="persona-entrepreneurs" class="persona-trigger cursor-pointer p-4 rounded-lg border persona-box" style="border-color: var(--border-color); background: var(--container-bg); transition: box-shadow 0.2s, border-left-width 0.2s, border-left-color 0.2s; border-left-width: 6px; border-left-color: transparent;">
                    <h3 class="text-lg font-semibold persona-title" style="color: var(--text-primary); transition: color 0.2s;">For Entrepreneurs</h3>
                    <ul class="text-sm mt-2 space-y-2" style="color: var(--text-secondary); list-style: none; padding: 0;">
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Validate your business idea</li>
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Create a launch plan and roadmap</li>
                        <li class="flex items-start gap-2"><span class="mt-1 text-[var(--primary-action-bg)]"><i class="fas fa-check-circle"></i></span>Manage marketing and growth tasks</li>
                    </ul>
                </div>
            </div>
            <!-- Right Column: Image Showcase -->
            <div id="showcase-image-container" class="lg:col-span-2 mt-10 lg:mt-0 flex flex-col items-center">
                <img id="showcase-image" src="https://storage.googleapis.com/gemini-prod-us-west1-assets/image_b9f7c3.png" alt="A screenshot of a Toad grid for students" class="rounded-xl shadow-2xl ring-1 ring-black/5 max-w-full h-auto" style="box-shadow: 0 8px 32px 0 rgba(16,185,129,0.15); border: 2px solid var(--primary-action-bg);">
                <video id="showcase-video" class="rounded-xl shadow-2xl ring-1 ring-black/5 max-w-full h-auto" style="box-shadow: 0 8px 32px 0 rgba(16,185,129,0.15); border: 2px solid var(--primary-action-bg); display: none;" autoplay muted loop playsinline></video>
                <div class="mt-6 text-center">
                    <a href="{% url 'pages:templates_overview' %}" 
                       class="inline-block px-6 py-3 rounded-lg font-medium transition-all duration-200 cursor-pointer text-white"
                       style="background-color: var(--tertiary-action-bg);"
                       onmouseover="this.style.backgroundColor='#e65c36'" onmouseout="this.style.backgroundColor='var(--tertiary-action-bg)'">
                        Browse Templates
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Radically Simple. Surprisingly Powerful. Section -->
<section class="pt-2 pb-6 bg-[var(--container-bg)]">
    <div class="max-w-6xl mx-auto px-4">
        <div class="text-center mb-6">
            <h2 class="text-3xl sm:text-6xl font-bold" style="color: var(--tertiary-action-bg);">Radically Simple</h2>
            <h2 class="text-3xl sm:text-6xl font-bold mt-2" style="color: var(--tertiary-action-bg);">Surprisingly Powerful</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Box 1 -->
            <div class="bg-white border border-[var(--border-color)] rounded-xl shadow-sm p-8 flex flex-col items-center text-center">
                <div class="mb-4 text-[var(--primary-action-bg)]">
                    <i class="fas fa-magic fa-2x"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2" style="color: var(--primary-action-bg);">Purposefully Simple</h3>
                <p class="text-[var(--text-secondary)] text-base">We believe software should get out of your way. No complexity, no distractions.</p>
            </div>
            <!-- Box 2 -->
            <div class="bg-white border border-[var(--border-color)] rounded-xl shadow-sm p-8 flex flex-col items-center text-center">
                <div class="mb-4 text-[var(--primary-action-bg)]">
                    <i class="fas fa-bullseye fa-2x"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2" style="color: var(--primary-action-bg);">Find Your Focus</h3>
                <p class="text-[var(--text-secondary)] text-base">A clear grid provides a clear mind. See everything at once and focus on what's next.</p>
            </div>
            <!-- Box 3 -->
            <div class="bg-white border border-[var(--border-color)] rounded-xl shadow-sm p-8 flex flex-col items-center text-center">
                <div class="mb-4 text-[var(--primary-action-bg)]">
                    <i class="fas fa-heart fa-2x"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2" style="color: var(--primary-action-bg);">Thoughtfully Crafted</h3>
                <p class="text-[var(--text-secondary)] text-base">We obsess over the details that make Toad feel responsive and delightful to use.</p>
            </div>
        </div>
    </div>
</section>

<!-- Bottom Call to Action -->
<div class="max-w-lg mx-auto mt-6 mb-12 text-center">
    <a href="{% url 'accounts:register_choices' %}"
       class="inline-block px-8 py-3 rounded-lg font-medium transition-all duration-200 cursor-pointer text-[var(--primary-action-text)]"
       style="background: var(--tertiary-action-bg);"
       onmouseover="this.style.background='#e65c36'" onmouseout="this.style.background='var(--tertiary-action-bg)'">
        Join Today for Free
    </a>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Animation sequence elements
        const logoContainer = document.getElementById('logo-container');
        const initialText = document.getElementById('initial-text');
        const joinButton = document.getElementById('join-button');
        const initialContent = document.getElementById('initial-content');
        const videoContainer = document.getElementById('video-container');
        const heroVideo = document.getElementById('hero-video');
        
        // Phase 1: Show logo and text (no button yet)
        initialContent.style.display = 'block';
        setTimeout(() => {
            logoContainer.style.opacity = '1';
            logoContainer.style.transition = 'opacity 0.8s ease-out';
        }, 100);
        
        setTimeout(() => {
            initialText.style.opacity = '1';
            initialText.style.transition = 'opacity 0.8s ease-out';
        }, 400);
        
        // Phase 2: After 3 seconds, switch to video
        setTimeout(() => {
            // Fade out initial content
            initialContent.style.opacity = '0';
            initialContent.style.transition = 'opacity 0.5s ease-out';
            
            setTimeout(() => {
                // Hide initial content completely
                initialContent.style.display = 'none';
                
                // Show and fade in video
                videoContainer.style.display = 'block';
                videoContainer.style.opacity = '0';
                setTimeout(() => {
                    videoContainer.style.opacity = '1';
                    videoContainer.style.transition = 'opacity 0.8s ease-out';
                    // Start video playback
                    heroVideo.play();
                }, 50);
            }, 500);
        }, 3000);
        
        // Phase 3: When video ends, show logo + text + button (final state)
        heroVideo.addEventListener('ended', function() {
            // Fade out video
            videoContainer.style.opacity = '0';
            videoContainer.style.transition = 'opacity 0.5s ease-out';
            
            setTimeout(() => {
                videoContainer.style.display = 'none';
                
                // Show initial content again with button
                initialContent.style.display = 'block';
                initialContent.style.opacity = '0';
                logoContainer.style.opacity = '0';
                initialText.style.opacity = '0';
                
                setTimeout(() => {
                    initialContent.style.opacity = '1';
                    initialContent.style.transition = 'opacity 0.8s ease-out';
                    logoContainer.style.opacity = '1';
                    logoContainer.style.transition = 'opacity 0.8s ease-out';
                }, 100);
                
                setTimeout(() => {
                    initialText.style.opacity = '1';
                    initialText.style.transition = 'opacity 0.8s ease-out';
                }, 400);
                
                setTimeout(() => {
                    joinButton.style.opacity = '1';
                    joinButton.style.transition = 'opacity 0.8s ease-out';
                }, 700);
            }, 500);
        });
    });
</script>

<script>
// Interactive Use Case Section JS
(function() {
    const personas = [
        {
            id: 'persona-students',
            img: {
                desktop: '{% static "gif/Course Planner GIF.gif" %}',
                mobile: '{% static "img/Mobile - Student Grid.png" %}'
            },
            video: {
                desktop: '{% static "video/Toad - Students Highlights.mp4" %}'
            },
            alt: 'A screenshot of a Toad grid for students',
        },
        {
            id: 'persona-professionals',
            img: {
                desktop: '{% static "gif/Professionals GIF.gif" %}',
                mobile: '{% static "img/Mobile - Professionals Grid.png" %}'
            },
            alt: 'A screenshot of a Toad grid for professionals',
        },
        {
            id: 'persona-entrepreneurs',
            img: {
                desktop: '{% static "gif/Entrepreneurs GIF.gif" %}',
                mobile: '{% static "img/Mobile - Entrepreneurs Grid.png" %}'
            },
            alt: 'A screenshot of a Toad grid for entrepreneurs',
        },
    ];
    const triggers = document.querySelectorAll('.persona-trigger');
    const showcaseImg = document.getElementById('showcase-image');
    const showcaseVideo = document.getElementById('showcase-video');
    // Always pre-select Students persona on load
    function setActivePersona(personaId) {
        triggers.forEach(t => {
            t.classList.remove('active');
            t.style.borderLeftColor = 'transparent';
            t.style.borderLeftWidth = '6px';
            const title = t.querySelector('.persona-title');
            if (title) title.style.color = getComputedStyle(document.documentElement).getPropertyValue('--text-primary');
        });
        const active = document.getElementById(personaId);
        if (active) {
            active.classList.add('active');
            active.style.borderLeftColor = getComputedStyle(document.documentElement).getPropertyValue('--tertiary-action-bg');
            active.style.borderLeftWidth = '8px';
            const title = active.querySelector('.persona-title');
            if (title) title.style.color = getComputedStyle(document.documentElement).getPropertyValue('--tertiary-action-bg');
            active.style.boxShadow = '0 4px 16px 0 rgba(16,185,129,0.10)';
            const persona = personas.find(p => p.id === personaId);
            if (persona && showcaseImg) {
                const isMobile = window.innerWidth < 768;
                // If desktop and persona has a desktop video, show video instead of image
                if (!isMobile && persona.video && persona.video.desktop && showcaseVideo) {
                    // Hide image, show video
                    showcaseImg.style.display = 'none';
                    showcaseVideo.style.display = 'block';
                    if (showcaseVideo.src !== persona.video.desktop) {
                        showcaseVideo.src = persona.video.desktop;
                    }
                } else {
                    // Show image, hide video
                    showcaseVideo.style.display = 'none';
                    showcaseImg.style.display = 'block';
                    if (persona.id === 'persona-students' || persona.id === 'persona-professionals' || persona.id === 'persona-entrepreneurs') {
                        showcaseImg.src = isMobile ? persona.img.mobile : persona.img.desktop;
                    } else {
                        showcaseImg.src = persona.img;
                    }
                    showcaseImg.alt = persona.alt;
                }
            }
        }
    }
    setActivePersona('persona-students');
    triggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
            setActivePersona(this.id);
        });
        trigger.addEventListener('blur', function() {
            this.style.boxShadow = '';
        });
    });

    // Intersection Observer for fade-in
    const useCaseSection = document.getElementById('use-case-section');
    if (useCaseSection) {
        const observer = new window.IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    useCaseSection.classList.remove('opacity-0', 'translate-y-8');
                    useCaseSection.classList.add('opacity-100', 'translate-y-0');
                    observer.disconnect();
                }
            });
        }, { threshold: 0.2 });
        observer.observe(useCaseSection);
    }
})();
</script>

{% endblock %}